{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product.name }} - üß± Bricky Lego Store</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="{% static 'store/css/lego.css' %}">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <i class="fas fa-cube"></i>
                <span>üß± Bricky Lego</span>
            </div>
            <ul class="nav-links">
                <li><a href="/">‚Üê Back to Store</a></li>
                <li><a href="/admin" class="btn-cart">üõí Admin</a></li>
            </ul>
        </div>
    </nav>

    <!-- Product Detail Section -->
    <section class="product-detail" style="margin-top: 70px; padding: 60px 0;">
        <div class="container">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: start;">
                <!-- Product Image -->
                <div>
                    {% if product.picture %}
                        <img src="{{ product.picture.url }}" alt="{{ product.name }}" 
                             style="width: 100%; border-radius: 25px; box-shadow: var(--shadow-xl); 
                                    border: 3px solid var(--lego-yellow);">
                    {% else %}
                        <div style="width: 100%; height: 500px; background: linear-gradient(135deg, var(--lego-yellow), var(--lego-green)); 
                                    border-radius: 25px; display: flex; align-items: center; justify-content: center; font-size: 5rem;">
                            üß±
                        </div>
                    {% endif %}
                </div>

                <!-- Product Info -->
                <div>
                    <div style="margin-bottom: 30px;">
                        <span style="display: inline-block; background: var(--lego-blue); color: white; padding: 8px 15px; 
                                    border-radius: 20px; font-weight: 700; font-size: 0.85rem;">
                            {{ product.category.title }}
                        </span>
                    </div>

                    <h1 style="color: var(--lego-red); margin-bottom: 20px; font-size: 2.5rem;">
                        {{ product.name }}
                    </h1>

                    <!-- Price -->
                    <div style="font-size: 2.5rem; font-weight: 900; color: var(--lego-green); margin-bottom: 30px;">
                        üí∞ ${{ product.price }}
                    </div>

                    <!-- Stock Status -->
                    <div style="margin-bottom: 30px;">
                        {% if product.stock > 10 %}
                            <span style="background: linear-gradient(135deg, var(--lego-green), var(--bright-teal)); 
                                       color: white; padding: 12px 20px; border-radius: 20px; font-weight: 700; 
                                       display: inline-block;">
                                ‚ú® In Stock ({{ product.stock }} available)
                            </span>
                        {% elif product.stock > 0 %}
                            <span style="background: linear-gradient(135deg, var(--lego-yellow), var(--bright-orange)); 
                                       color: var(--lego-black); padding: 12px 20px; border-radius: 20px; font-weight: 700; 
                                       display: inline-block;">
                                ‚ö†Ô∏è Limited Stock ({{ product.stock }} left)
                            </span>
                        {% else %}
                            <span style="background: linear-gradient(135deg, #FF6B6B, #FF8E8E); 
                                       color: white; padding: 12px 20px; border-radius: 20px; font-weight: 700; 
                                       display: inline-block;">
                                ‚ùå Out of Stock
                            </span>
                        {% endif %}
                    </div>

                    <!-- Description -->
                    {% if product.description %}
                        <div style="background: var(--light-bg); padding: 25px; border-radius: 20px; margin-bottom: 30px; 
                                   border-left: 4px solid var(--lego-blue);">
                            <h3 style="color: var(--lego-blue); margin-bottom: 15px;">üìù About This Product</h3>
                            <p style="color: var(--dark-gray); line-height: 1.8;">
                                {{ product.description }}
                            </p>
                        </div>
                    {% endif %}

                    <!-- Action Buttons -->
                    <div style="display: flex; gap: 15px; margin-bottom: 40px;">
                        {% if product.stock > 0 %}
                            <button onclick="addToCart('{{ product.id }}', '{{ product.name }}')" 
                                    style="flex: 1; padding: 20px; background: linear-gradient(135deg, var(--lego-blue), var(--bright-teal)); 
                                          color: white; border: none; border-radius: 20px; font-weight: 900; font-size: 1.1rem; 
                                          cursor: pointer; box-shadow: var(--shadow-lg); transition: all 0.3s ease;">
                                üõí Add to Cart
                            </button>
                        {% else %}
                            <button onclick="notifyMe('{{ product.id }}')" 
                                    style="flex: 1; padding: 20px; background: linear-gradient(135deg, var(--bright-purple), var(--bright-pink)); 
                                          color: white; border: none; border-radius: 20px; font-weight: 900; font-size: 1.1rem; 
                                          cursor: pointer; box-shadow: var(--shadow-lg); transition: all 0.3s ease;">
                                üîî Notify Me
                            </button>
                        {% endif %}
                        <button onclick="window.location.href='/'" 
                                style="padding: 20px 30px; background: linear-gradient(135deg, var(--lego-red), var(--bright-orange)); 
                                       color: white; border: none; border-radius: 20px; font-weight: 900; font-size: 1.1rem; 
                                       cursor: pointer; box-shadow: var(--shadow-lg); transition: all 0.3s ease;">
                            üîô Continue Shopping
                        </button>
                    </div>

                    <!-- Product Details -->
                    <div style="background: linear-gradient(135deg, #F0F8FF, #FFF0F5); padding: 25px; border-radius: 20px; 
                               border: 2px solid var(--lego-blue);">
                        <h3 style="color: var(--lego-blue); margin-bottom: 15px;">‚ú® Why Kids Love This</h3>
                        <ul style="list-style: none; color: var(--dark-gray);">
                            <li style="padding: 8px 0;"><strong>üé® Creative Building</strong> - Endless possibilities</li>
                            <li style="padding: 8px 0;"><strong>üß† Brain Development</strong> - Enhances creativity</li>
                            <li style="padding: 8px 0;"><strong>üë• Social Play</strong> - Build with friends</li>
                            <li style="padding: 8px 0;"><strong>üèÜ Achievement</strong> - Complete awesome sets</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Related Products -->
            {% if related_products %}
            <div style="margin-top: 80px; padding-top: 60px; border-top: 3px dashed var(--lego-yellow);">
                <div style="text-align: center; margin-bottom: 50px;">
                    <h2 style="color: var(--lego-red); margin-bottom: 10px;">üéÅ Similar Products</h2>
                    <p style="color: var(--gray); font-weight: 600;">You might also like these amazing sets!</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px;">
                    {% for rel_product in related_products %}
                    <div onclick="window.location.href='{{ rel_product.get_absolute_url }}'" 
                         style="cursor: pointer; background: white; border-radius: 20px; overflow: hidden; 
                                box-shadow: var(--shadow-md); border: 3px solid var(--lego-yellow); 
                                transition: all 0.3s ease;">
                        <div style="height: 200px; background: linear-gradient(135deg, var(--lego-yellow), var(--lego-blue)); 
                                   display: flex; align-items: center; justify-content: center;">
                            {% if rel_product.picture %}
                                <img src="{{ rel_product.picture.url }}" alt="{{ rel_product.name }}" 
                                     style="width: 100%; height: 100%; object-fit: cover;">
                            {% else %}
                                <span style="font-size: 3rem;">üß±</span>
                            {% endif %}
                        </div>
                        <div style="padding: 20px;">
                            <h4 style="color: var(--lego-red); margin-bottom: 10px;">{{ rel_product.name }}</h4>
                            <div style="color: var(--lego-green); font-weight: 900; font-size: 1.3rem;">
                                ${{ rel_product.price }}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>üß± Bricky Lego</h3>
                    <p>Building fun, one brick at a time since 2025</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Store</a></li>
                        <li><a href="/">Browse</a></li>
                        <li><a href="/admin">Admin</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact</h4>
                    <p>üìß support@bricky.com</p>
                    <p>üìû 1-800-LEGO-FUN</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Bricky Lego Store. All rights reserved. üéâ</p>
            </div>
        </div>
    </footer>

    <!-- Floating Cart Button -->
    <button class="fab" onclick="toggleCart()">üõí</button>

    <script src="{% static 'store/js/lego.js' %}"></script>
</body>
</html>
